<ui:FluentWindow x:Class="Biome.Desktop.App.Windowing.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        Title="Biome Settings" Height="600" Width="700"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        ExtendsContentIntoTitleBar="True"
        WindowBackdropType="Mica"
        WindowCornerPreference="Round">
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Title Bar -->
            <RowDefinition Height="Auto"/> <!-- Header -->
            <RowDefinition Height="*"/>    <!-- Content Scroll -->
            <RowDefinition Height="Auto"/> <!-- Footer -->
        </Grid.RowDefinitions>

        <ui:TitleBar Grid.Row="0" Title="Biome Settings" />

        <!-- Header -->
        <StackPanel Grid.Row="1" Margin="0,0,0,24">
            <ui:TextBlock FontTypography="TitleLarge" Text="Settings" />
            <ui:TextBlock FontTypography="Body" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Text="Manage your device identity and cloud connection." />
        </StackPanel>

        <!-- Content -->
        <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto" Padding="0,0,12,0">
            <StackPanel>
                
                <!-- Section: Connectivity -->
                <ui:TextBlock FontTypography="BodyStrong" Text="Connectivity" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,8,0,4"/>
                
                <!-- Device ID Card -->
                <ui:Card Margin="0,0,0,8">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <ui:SymbolIcon Symbol="Laptop24" FontSize="24" Margin="0,0,16,0"/>
                        
                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <ui:TextBlock FontTypography="BodyStrong" Text="Device Identity" />
                            <ui:TextBlock FontTypography="Caption" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Text="Unique identifier for this machine in the Biome network." />
                        </StackPanel>

                        <ui:TextBox x:Name="DeviceIdBox" Grid.Column="2" IsReadOnly="True" Width="200" Icon="Copy24" PlaceholderText="Device ID" />
                    </Grid>
                </ui:Card>

                <!-- Firebase Config Card -->
                <ui:Card>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>

                        <ui:SymbolIcon Symbol="Cloud24" FontSize="24" Margin="0,0,16,0"/>

                        <StackPanel Grid.Column="1" VerticalAlignment="Center">
                            <ui:TextBlock FontTypography="BodyStrong" Text="Firebase Credentials" />
                            <ui:TextBlock FontTypography="Caption" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Text="Service account JSON for authentication." />
                        </StackPanel>

                        <StackPanel Grid.Column="2" Orientation="Horizontal">
                            <ui:TextBox x:Name="ConfigPathBox" Width="200" PlaceholderText="Path to json..." Margin="0,0,8,0" />
                            <ui:Button Icon="Folder24" Click="BrowseConfig_Click" ToolTip="Browse for file" />
                        </StackPanel>
                    </Grid>
                </ui:Card>

                <!-- Section: Behavior -->
                <ui:TextBlock FontTypography="BodyStrong" Text="Behavior" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,16,0,4"/>

                <!-- Auto-Send Toggle (Placeholder for now) -->
                <ui:CardControl Icon="ArrowSync24">
                    <ui:CardControl.Header>
                        <StackPanel>
                            <ui:TextBlock FontTypography="BodyStrong" Text="Auto-Send Clipboard" />
                            <ui:TextBlock FontTypography="Caption" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Text="Automatically upload content when copied (Disabled)." />
                        </StackPanel>
                    </ui:CardControl.Header>
                    <ui:ToggleSwitch IsChecked="False" IsEnabled="False" />
                </ui:CardControl>

                <!-- Status Section -->
                <ui:TextBlock FontTypography="BodyStrong" Text="System Status" Foreground="{DynamicResource TextFillColorSecondaryBrush}" Margin="0,16,0,4"/>
                <ui:InfoBar x:Name="StatusInfoBar" Title="Ready" Message="System is idle and ready to send." Severity="Success" IsOpen="True" IsClosable="False" />

            </StackPanel>
        </ScrollViewer>

        <!-- Footer Actions -->
        <Grid Grid.Row="3" Margin="0,24,0,0">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <ui:Button Content="Save Changes" Icon="Save24" Appearance="Primary" Click="Save_Click" Margin="0,0,8,0" />
                <ui:Button Content="Cancel" Appearance="Secondary" Click="Cancel_Click"/>
            </StackPanel>
        </Grid>
    </Grid>
</ui:FluentWindow>
